<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/event/jquery-3.4.1.min.js"></script>
    <link rel="stylesheet" href='/style/profile.css' />
    <title>Thông tin</title>
</head>

<body>
    <%- include('./layout/header.ejs'); %>

        <main class="container profile">
            <div class="row">
                <div class="image-profile col-sm-10 col-lg-10 mx-auto mb-3">
                    <img class="img-fluid h-100 w-100" id="cover-bg" src="<%=user.user_background%>" alt="">
                    <span id="change-cover-bg" data-toggle="modal" data-target="#update_cover-bg">Thay đổi ảnh bìa</span>
                    <div class="avt-profile mx-auto text-center d-block">
                        <img id="avt" src="<%=user.user_avatar%>" width="120px" height="120px" />
                        <i class="fas fa-camera" title="Cập nhật ảnh đại diện" data-toggle="modal" data-target="#update_avt"></i>
                        </input>
                        <h5>
                            <%- user.user_firstname +" " + user.user_lastname   %>
                        </h5>
                    </div>
                </div>
                <!---->
                <div class="modal fade" id="update_cover-bg" tabindex="-1" role="dialog" aria-labelledby="update_cover-bg" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4>Cập nhật ảnh bìa</h4>
                            </div>
                            <div class="modal-body text-center">
                                <form action="profile/uploadBg" method="POST" enctype="multipart/form-data">
                                    <label id="input-img-label" for="input-cover-bg">Tải ảnh lên</label>
                                    <input type="file" name="backgroundProfile" class="input-img" id="input-cover-bg" />
                                    <span id="cover-bg-selected" class="text-success d-none ml-3">Đã chọn 1 ảnh</span>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Huỷ</button>
                                        <button type="submit" class="btn btn-primary">Cập nhật</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!---->
                <div class="modal fade" id="update_avt" tabindex="-1" role="dialog" aria-labelledby="update_avt" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4>Cập nhật ảnh đại diện</h4>
                            </div>
                            <div class="modal-body text-center">
                                <form action='/profile/uploadAvatar' method="post" enctype="multipart/form-data">
                                    <label id="input-img-label" for="input-avarta">Tải ảnh lên</label>
                                    <input type="file" name="avatarProfile" class="input-img" id="input-avarta" />
                                    <span id="avt-selected" class="text-success d-none ml-3">Đã chọn 1 ảnh</span>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Huỷ</button>
                                        <button type="submit" class="btn btn-primary">Cập nhật</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex mx-auto col-sm-10">
                    <div class="per-profile col-sm-4 col-lg-4 mx-auto border">
                        <ul class="list-group list-group-flush mt-3">
                            <li class="list-group-item">Họ tên:
                                <strong>  <%-user.user_lastname%></strong>
                            </li>
                            <li class="list-group-item">Giới tính:
                                <strong>  <%-user.user_lastname%></strong>
                            </li>
                            <li class="list-group-item">Đến từ:
                                <strong> <%-user.user_address%></strong>
                            </li>
                            <li class="list-group-item">Email:
                                <strong> <%-user.user_email%></strong>
                            </li>
                            <li class="list-group-item">Giới thiệu:
                                <strong> <%-user.user_bio%></strong>

                            </li>
                        </ul>
                    </div>
                    <div class="post-profile col-sm-7 col-lg-7 mx-auto ml-5 ">
                    </div>
                </div>

        </main>
</body>

<script>
    $(document).ready(function() {
        $(".nav li").removeClass('active');
        $('#profile').addClass('active');

        $('.btn-default').click(() => {
            $('#avt_input').click();
        })

        $('#input-avarta').on('change', (e) => {
            $('#avt-selected').removeClass('d-none').addClass('d-block');
        })
        $('#input-cover-bg').on('change', (e) => {
            $('#cover-bg-selected').removeClass('d-none').addClass('d-block');
        })



        for (let i = 20; i > 0; i--) {
            $('.post-profile').append(
                '<div class="card col-sm-12 col-lg-12 mx-auto mt-3 shadow post-frame">' +
                ' <div class="card-body m-0 p-0">' +
                '  <div class="card-title d-flex">' +
                '<img id="post-avt" src="/img/avt.png" alt="" width="50px" height="50px">' +
                '<div class="post-detail ml-3">' +
                '  <h5 id="post-name">Nguyễn Văn A</h5>' +
                ' <span id="post-time">7:00</span>' +
                '  </div>' +
                '      </div>' +
                '  <p class="card-text">Nội dung bài đăng hehehe</p>' +
                ' <img src="/img/background-login.jpg" width="100%" height="300px" />' +
                '</div>' +
                '    <div class="card-footer text-center">' +
                ' <div class="post-action">' +
                '  <a data-toggle="collapse" href="#show-cmt' + i + '" role="button" aria-expanded="false" aria-controls="collapseExample">' +
                '<span class="text-dark">Bình luận</span>' +
                '       </a>' +
                '<div class="collapse" id="show-cmt' + i + '">' +
                '<div class="media text-left comment">' +
                ' <img class="mr-3 img-user-cmt" src="img/avt.png" alt="Generic placeholder image">' +
                '  <div class="media-body">' +
                ' <h6 class="mt-0">Ten user</h6>' +
                ' <p >Noi dung cmt </p>' +
                '<span>Time</span>' +
                ' </div>' +
                '</div>' +
                '</div>' +
                '  </div>' +
                '   </div>' +
                '  </div>'
            )
        }
    })
</script>


</html>